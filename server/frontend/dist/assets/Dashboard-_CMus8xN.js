import{j as e,F as i,H as m,o as S,aa as w,b as s,B as O,aB as T,aE as z,aF as L,P as l}from"./chakra-B_DUJliM.js";import{f as E,u as v}from"./redux-BFEnBRFN.js";import{r as h,h as F}from"./react-D9OIIVWL.js";import{aU as W,aV as f,aK as R}from"./index-C674oLPn.js";import{c as k}from"./index.esm-C2w5JDxg.js";import{c as A}from"./index.esm-pyeY5B28.js";import{C as B}from"./CompletedOrderChart-CWVok4bA.js";import"./toast-D556Fe1H.js";import"./react-apexcharts.min-ApQTKi8h.js";import"./subMonths-EyZRS0fZ.js";import"./normalizeDates-DLvNHQ5D.js";import"./startOfDay-Dk20W2YO.js";import"./addMonths-BAauhxW2.js";const d=({title:o,icon:t,data:r,footerText:c,footerLink:n,color:a})=>{const x=F();return e.jsxs(T,{children:[e.jsxs(z,{px:5,children:[e.jsxs(i,{justifyContent:"space-between",mb:5,children:[e.jsx(m,{fontSize:"24px",children:o}),t]}),r]}),n&&c&&e.jsxs(L,{bg:a,color:"white",px:3,py:2,display:"flex",alignItems:"center",justifyContent:"flex-end",cursor:"pointer",gap:3,onClick:()=>x(n),children:[e.jsx(s,{children:c}),e.jsx(k,{})]})]})},I=({isLoading:o,isError:t})=>o?e.jsx(s,{my:20,w:"fit-content",mx:"auto",fontSize:24,children:"Loading..."}):t?e.jsx(s,{my:20,w:"fit-content",mx:"auto",color:"red",children:"Error loading data. Please try again."}):null;function Y(){var a,x,p,g,j,u,y,b,C;const[o,t]=h.useState({isLoading:!0,isError:!1}),r=E(D=>D.waiter.dashboardData),c=v(),n=h.useCallback(()=>{t({isLoading:!0,isError:!1}),c(W()).then(()=>t({isLoading:!1,isError:!1})).catch(()=>t({isLoading:!1,isError:!0}))},[c]);return h.useEffect(()=>{n()},[n]),e.jsxs("div",{children:[e.jsxs(i,{flexWrap:"wrap",gap:10,alignItems:"center",justifyContent:"space-between",mt:{lg:10,base:24},mb:5,children:[e.jsx(m,{fontSize:30,children:"Waiter Dashboard"}),e.jsx(S,{isLoading:o.isLoading,leftIcon:e.jsx(A,{}),onClick:n,children:"Refresh"})]}),e.jsx(I,{isLoading:o.isLoading,isError:o.isError}),!o.isLoading&&!o.isError&&r&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{templateColumns:{base:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},gap:5,children:[e.jsx(d,{title:"Today's Orders",icon:e.jsx(f,{size:30,color:"green"}),data:e.jsxs(i,{flexDirection:{md:"row",base:"column"},justifyContent:"space-between",children:[e.jsxs(i,{flexDirection:"column",children:[e.jsx(s,{fontWeight:"500",fontSize:"larger",children:"Completed"}),e.jsx(s,{fontWeight:"600",fontSize:"xx-large",color:"green",children:((a=r==null?void 0:r.todayOrders)==null?void 0:a.Completed)??0})]}),e.jsxs(i,{flexDirection:"column",children:[e.jsxs(i,{gap:3,children:[e.jsx(s,{children:"Available:"}),e.jsx(s,{children:((x=r==null?void 0:r.todayOrders)==null?void 0:x.Assigned)??0})]}),e.jsxs(i,{gap:3,color:"red",children:[e.jsx(s,{children:"Pending:"}),e.jsx(s,{children:((p=r==null?void 0:r.todayOrders)==null?void 0:p.Accepted)??0})]})]})]}),footerText:"View Details",footerLink:"/orders/today",color:"green"}),e.jsx(d,{title:"Monthly Orders",icon:e.jsx(f,{size:30,color:"blue"}),data:e.jsxs(i,{flexDirection:{md:"row",base:"column"},justifyContent:"space-between",children:[e.jsxs(i,{flexDirection:"column",children:[e.jsx(s,{fontWeight:"500",fontSize:"larger",children:"Completed"}),e.jsx(s,{fontWeight:"600",fontSize:"xx-large",color:"blue",children:((g=r==null?void 0:r.monthlyOrders)==null?void 0:g.Completed)??0})]}),e.jsx(i,{flexDirection:"column",children:e.jsxs(i,{gap:3,color:"blue",children:[e.jsx(s,{children:"Assigned:"}),e.jsx(s,{children:((j=r==null?void 0:r.monthlyOrders)==null?void 0:j.Assigned)??0})]})})]}),footerText:"View History",footerLink:"/orders/monthly",color:"blue"})]}),e.jsxs(O,{mt:5,bg:"#fff",children:[e.jsx(m,{fontSize:20,mb:5,pl:5,pt:5,children:"Performance Overview"}),e.jsx(B,{weeklyOrders:((u=r==null?void 0:r.weeklyOrders)==null?void 0:u.Completed)??[],monthlyOrders:((y=r==null?void 0:r.monthlyOrders)==null?void 0:y.Completed)??[],yearlyOrders:((b=r==null?void 0:r.yearlyOrders)==null?void 0:b.Completed)??[],totalTips:(r==null?void 0:r.totalTips)??0})]}),e.jsxs(w,{templateColumns:{base:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},mt:5,gap:5,children:[e.jsx(d,{title:"Serving Time",icon:e.jsx(R,{size:30,color:"purple"}),data:e.jsxs(i,{flexDirection:"column",gap:5,children:[e.jsxs(i,{flexDirection:"column",alignItems:"center",children:[e.jsx(s,{fontWeight:"500",fontSize:"larger",children:"Average"}),e.jsxs(s,{fontWeight:"600",fontSize:"xx-large",color:"purple",children:[((r==null?void 0:r.averageServingTime)/60).toFixed(1)," min"]})]}),e.jsxs(i,{flexDirection:"row",justifyContent:"space-between",children:[e.jsxs(i,{flexDirection:"column",alignItems:"center",children:[e.jsx(s,{children:"Fastest"}),e.jsxs(s,{children:[((r==null?void 0:r.fastestServingTime)/60).toFixed(1)," min"]})]}),e.jsxs(i,{flexDirection:"column",alignItems:"center",children:[e.jsx(s,{children:"Slowest"}),e.jsxs(s,{children:[((r==null?void 0:r.slowestServingTime)/60).toFixed(1)," min"]})]})]})]})}),e.jsx(d,{title:"Tips Collected",icon:e.jsx(f,{size:30,color:"gold"}),data:e.jsx(i,{flexDirection:"column",gap:5,children:e.jsxs(s,{fontWeight:"600",fontSize:"xx-large",color:"gold",children:["$",((C=r==null?void 0:r.totalTips)==null?void 0:C.toFixed(2))??0]})}),footerText:"View Tips",footerLink:"/tips/history",color:"gold"})]})]})]})}d.propTypes={title:l.string.isRequired,icon:l.element.isRequired,data:l.node.isRequired,footerText:l.string,footerLink:l.string,color:l.string};export{Y as default};
