import{j as a,F as A,S as E,H as D,b as O,aa as w}from"./chakra-B_DUJliM.js";import{O as S,D as b}from"./DineInActiveOrder-CqCRGWgd.js";import{f as l,u as v}from"./redux-BFEnBRFN.js";import{r as m}from"./react-D9OIIVWL.js";import{ab as o,aW as d,aI as n,aX as f,aY as I}from"./index-C674oLPn.js";import"./index.esm-C8Ls1WbU.js";import"./index.esm-CEhDG2xH.js";import"./dineInOrder-Qshl_rwx.js";import"./AllotOrderModal-ut9QwBD-.js";import"./toast-D556Fe1H.js";function U(){const i=l(e=>e.waiter.orders||[]),c=l(e=>e.waiter.activeOrders),[h,p]=m.useState(!0),s=v(),u=e=>{s(d({orderId:e,status:n.ACCEPTED}))},C=e=>{s(d({orderId:e,status:n.CANCELLED}))},x=e=>{s(d({orderId:e,status:n.REJECTED}))},g=(e,t)=>{if(s(d({orderId:e,status:t})),t===n.COMPLETED||t===n.CANCELLED)return s(f()),o.showOrderCompleted()};return m.useEffect(()=>{(async()=>{try{await Promise.all([s(f()),s(I())])}catch(t){console.error("Failed to fetch orders:",t)}finally{p(!1)}})()},[s]),h?a.jsx(A,{justifyContent:"center",alignItems:"center",height:"50vh",children:a.jsx(E,{size:"xl"})}):a.jsxs(a.Fragment,{children:[a.jsx(D,{mt:20,mb:5,fontSize:20,children:"Available Orders"}),i.length===0?a.jsx(O,{p:3,w:"fit-content",bg:"rgba(255, 255, 255, 0.5)",mx:"auto",my:20,children:"You don't have any order offer at this moment"}):a.jsx(w,{gap:5,gridTemplateColumns:{base:"1fr",md:"1fr 1fr",lg:"1fr 1fr 1fr"},children:i==null?void 0:i.map((e,t)=>a.jsx(S,{data:e,handleAccept:r=>o.showAcceptConfirmation(r,u),handleReject:r=>o.showRejectConfirmation(r,x),disabled:c.some(r=>r.id===e.id)},t))}),c&&c.map((e,t)=>a.jsx(b,{activeOrder:e,handleCancel:r=>o.showCancelConfirmation(r,C),handleUpdateStatus:(r,j)=>o.showStatusChangeConfirm(r,j,g)},t))]})}export{U as default};
