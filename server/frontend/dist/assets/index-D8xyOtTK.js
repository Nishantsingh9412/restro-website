import{J as Or,j as e,P as F,r as Qe,s as K,t as er,v as B,y as te,w as G,q as N,o as O,a4 as rr,a5 as Rr,B as n,g as Y,a1 as k,a2 as A,ad as $e,V as se,ae as J,b as x,af as ue,u as q,H as z,F as M,p as Z,ag as pe,X,Y as Q,ah as xe,ai as je,aj as ge,ak as fe,al as be,am as ye,an as Se,O as Ce,a7 as Be,a8 as sr,S as Tr,ac as Er,K as kr,N as Ar,a3 as Dr}from"./chakra-B_DUJliM.js";import{r as T,h as ve,b as Ie}from"./react-D9OIIVWL.js";import{a1 as wr,a2 as _r,a3 as Nr,a4 as Fr,a5 as Mr,a6 as Pr,a7 as zr,r as H,a8 as Lr,a9 as Wr}from"./index-C674oLPn.js";import{a as Oe}from"./index.esm-C2w5JDxg.js";import{Q as qr,B as Ge}from"./toast-D556Fe1H.js";/* empty css                      */import{E as He}from"./chunk-FOYGMBBW-DHh16wZn.js";import{p as Vr,F as Je}from"./dineInOrder-Qshl_rwx.js";import{u as U,f as P}from"./redux-BFEnBRFN.js";import{c as Ur,d as Re}from"./index.esm-CEhDG2xH.js";import{t as de}from"./maps.min-Dvnb-tJ8.js";import{p as Yr,a as $r}from"./takeAwayOrder-BoBAlo1H.js";import{a as Br}from"./index.esm-pyeY5B28.js";import{R as Gr}from"./restaurantModal-BI6-llvY.js";import{F as Hr}from"./ForbiddenPage-DOSjSRWN.js";var Ze=Or({displayName:"DeleteIcon",path:e.jsx("g",{fill:"currentColor",children:e.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})});const ee=async(s,o,i,u)=>{try{const{data:m}=await s;if(m&&m.result)return o({type:i,data:m.result}),{success:!0,message:u,data:m.result};throw new Error("No data returned from API")}catch(m){return{success:!1,message:m.response.data.error,status:m.response.status}}},Jr=s=>async o=>ee(wr(s),o,"ADD_ORDER_ITEM","Order Item Added Successfully"),he=()=>async s=>ee(_r(),s,"GET_ALL_ORDER_ITEMS","Order Items fetched Successfully"),me=()=>async s=>ee(Nr(),s,"GET_DRINKS_ONLY","Drinks fetched Successfully"),Zr=(s,o)=>async i=>ee(Fr(s,o),i,"UPDATE_SINGLE_ORDER_ITEM","Order Item Updated Successfully"),Kr=s=>async o=>{try{return await zr(s),o({type:"DELETE_SINGLE_ORDER_ITEM",id:s}),{success:!0,message:"Order Item Deleted Successfully"}}catch(i){return console.error(`Error in DELETE_SINGLE_ORDER_ITEM: ${i.message}`,i.stack),{success:!1,message:i.message}}},Xr=s=>async o=>ee(Mr(s),o,"SEARCH_ORDER_ITEM","Order Item Searched Successfully"),Qr=s=>async o=>ee(Pr(s),o,"SEARCH_DRINKS_ONLY","Drinks Searched Successfully"),Te=()=>async s=>{try{return s({type:"RESET_ORDER_ITEM_TEMP"}),{success:!0,message:"Order Item Reset Successfully"}}catch(o){return console.error(`Error in RESET_ORDER_ITEM_TEMP: ${o.message}`,o.stack),{success:!1,message:o.message}}},ne=s=>({type:"SET_FORM_DATA",data:s}),es=()=>({type:"RESET_FORM_DATA"});function tr({data:s,isOpen:o,onClose:i}){var c,w;const u="hvJOAVf5ZbSAzx17QYIVaeMP5vEeUwpR",m="DE",f=U(),[a,t]=T.useState({position:[((c=s.dropLocation)==null?void 0:c.lat)||50.95042,((w=s.dropLocation)==null?void 0:w.lng)||6.933551],locationName:s.dropLocationName||"",search:"",zoom:13,suggestions:[],loading:!1,error:null}),r=g=>t(p=>({...p,...g})),S=T.useRef(null),j=T.useRef(null),l=T.useRef(null),C=g=>{if(g.preventDefault(),r({loading:!0,suggestions:[],error:null}),!a.search.trim()){r({loading:!1});return}const p=`https://api.tomtom.com/search/2/search/${encodeURIComponent(a.search)}.json?key=${u}&countrySet=${m}&radius=50000&typeahead=true`;fetch(p).then(y=>{if(!y.ok)throw new Error("Network response was not ok");return y.json()}).then(y=>{const R=y.results||[];r({suggestions:R.length>0?R:[],error:R.length?null:"No results found."})}).catch(()=>{r({suggestions:[],error:"Error fetching data."})}).finally(()=>{r({loading:!1})})},h=(g,p)=>{const y=`https://api.tomtom.com/search/2/reverseGeocode/${g},${p}.json?key=${u}`;fetch(y).then(R=>R.json()).then(R=>{R.addresses&&R.addresses.length>0&&r({locationName:R.addresses[0].address.freeformAddress})}).catch(R=>{console.error("Error fetching reverse geocoding data:",R)})},D=g=>{var y;const p=[g.position.lat,g.position.lon];r({position:p,locationName:((y=g.address)==null?void 0:y.freeformAddress)||g.poi.name,suggestions:[],search:""}),j.current?(l.current?l.current.setLngLat([p[1],p[0]]):l.current=new de.Marker().setLngLat([p[1],p[0]]).addTo(j.current),j.current.setCenter([p[1],p[0]])):console.error("Map is not initialized.")};function d(g){if(!g.includes(","))return{error:"Invalid format: Missing comma separator."};const p=g.split(",").map(V=>V.trim());if(p.length<2)return{error:"Invalid format: Address missing ZIP and city."};const y=p[0],R=p[1].split(/\s+/);return R.length<2||isNaN(R[0])?{error:"Invalid format: ZIP code missing or invalid."}:{street:y,zip:R[0],city:R.slice(1).join(" ")}}const E=()=>{const{street:g,zip:p,city:y}=d(a.locationName);f(ne({dropLocation:{lat:a.position[0],lng:a.position[1]},dropLocationName:a.locationName,address:g,address2:y,zip:p})),i()};return T.useEffect(()=>{setTimeout(()=>{if(o&&S.current)return j.current?(j.current.setCenter([a.position[1],a.position[0]]),j.current.setZoom(a.zoom),l.current&&l.current.setLngLat([a.position[1],a.position[0]])):(j.current=de.map({key:u,container:S.current,center:[a.position[1],a.position[0]],zoom:a.zoom}),l.current=new de.Marker().setLngLat([a.position[1],a.position[0]]).addTo(j.current),j.current.on("click",g=>{const[p,y]=g.lngLat.toArray();j.current.panTo([p,y],{duration:200}),l.current&&l.current.setLngLat([p,y]),r({position:[y,p]}),h(y,p)})),()=>{j.current&&(j.current.remove(),j.current=null)}},0)},[o]),e.jsxs(Qe,{isOpen:o,onClose:i,size:"medium",children:[e.jsx(K,{}),e.jsxs(er,{children:[e.jsx(B,{children:"Search Location"}),e.jsx(te,{}),e.jsxs(G,{display:"flex",flexDirection:"column",gap:"10px",children:[e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx(N,{type:"search",placeholder:"Search places...",value:a.search,onChange:g=>r({search:g.target.value}),style:{flex:"1",padding:"10px",fontSize:"16px"}}),e.jsx(O,{borderRadius:"4px",bg:"blue.500",color:"#fff",_hover:{background:"blue.700"},style:{flexShrink:"0"},onClick:C,children:"Search"})]}),a.error&&e.jsx("p",{children:a.error}),e.jsx(rr,{children:a.suggestions.map(g=>{var p,y;return e.jsx(Rr,{onClick:()=>D(g),style:{padding:"10px",borderBottom:"1px solid #ddd",cursor:"pointer"},children:((p=g.address)==null?void 0:p.freeformAddress)||((y=g.poi)==null?void 0:y.name)},g.id)})}),e.jsx(n,{ref:S,style:{width:"100%",height:"400px",marginTop:"10px",cursor:"crosshair"}}),e.jsx(O,{borderRadius:"4px",bg:"#029CFF",color:"#fff",_hover:{background:"blue.500"},style:{marginTop:"10px"},onClick:E,children:"Submit"})]})]})]})}tr.propTypes={data:F.object,onSubmit:F.func,isOpen:F.bool,onClose:F.func};const nr=({goToNextStep:s})=>{var D;const o=U(),{isOpen:i,onOpen:u,onClose:m}=Y(),f=H(),a=JSON.parse(localStorage.getItem("ProfileData")),t=(D=a==null?void 0:a.result)==null?void 0:D._id,r=P(d=>d.form),S=()=>{const d=["name","phoneNumber","address","paymentMethod","deliveryMethod","dropLocation","dropLocationName"];for(const E of d)if(!r[E]||typeof r[E]=="string"&&r[E].trim()==="")return f(`Please enter ${E.replace(/([A-Z])/g," $1").toLowerCase()}`,"error"),!1;return/^\d{10}$/.test(r.phoneNumber)?r.zip&&!/^\d{5}(-\d{4})?$/.test(r.zip)?(f("Please enter a valid 5 digit zip code","error"),!1):!0:(f("Please enter a valid 10-digit phone number","error"),!1)},j=d=>{d.preventDefault(),S()&&(o(ne({created_by:t})),s())},l=(d,E)=>{o(ne({[d]:E}))},C={name:"John Doe",phoneNumber:"1234567890",address:"1234 Main St",address2:"Apt 101",zip:"12345",paymentMethod:"cash",deliveryMethod:"delivery",noteFromCustomer:"Leave at the front door."},h=()=>{o(ne(C))};return e.jsx(n,{p:4,children:e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsx(k,{id:"drop-location-heading",children:e.jsx(A,{fontSize:"xl",fontWeight:"bold",children:"Drop Location"})}),e.jsxs(k,{id:"name",isRequired:!0,mt:4,children:[e.jsx(A,{children:"Name"}),e.jsx(N,{type:"text",placeholder:"Customer Name",value:r.name,onChange:d=>l("name",d.target.value)})]}),e.jsxs(k,{id:"address",isRequired:!0,mt:4,children:[e.jsx(A,{children:"Address Line 1"}),e.jsx(N,{type:"text",placeholder:"1234 Main St",value:r.address,onChange:d=>l("address",d.target.value)})]}),e.jsxs(k,{id:"address2",children:[e.jsx(A,{children:"Address Line 2"}),e.jsx(N,{placeholder:"Apartment, studio, or floor",value:r.address2,onChange:d=>l("address2",d.target.value)})]}),e.jsxs(k,{id:"zip",mt:4,children:[e.jsx(A,{children:"Zip"}),e.jsx(N,{placeholder:"Zip",type:"number",value:r.zip,onChange:d=>l("zip",d.target.value)})]})]}),e.jsxs(k,{id:"phone-number",mt:4,isRequired:!0,children:[e.jsx(A,{children:"Phone Number"}),e.jsx(N,{type:"number",placeholder:"Phone Number",value:r.phoneNumber,onChange:d=>l("phoneNumber",d.target.value)})]}),e.jsxs(k,{id:"payment-method",mt:4,children:[e.jsx(A,{children:"Payment Method"}),e.jsx($e,{value:r.paymentMethod,onChange:d=>l("paymentMethod",d),children:e.jsxs(se,{direction:"row",children:[e.jsx(J,{value:"cash",children:"Cash"}),e.jsx(J,{value:"card",children:"Card"}),e.jsx(J,{value:"alreadyPaid",children:"Already Paid"}),e.jsx(J,{value:"online",children:"Online"}),e.jsx(J,{value:"paypal",children:"Paypal"})]})})]}),e.jsxs(k,{id:"delivery-method",mt:4,children:[e.jsx(A,{children:"Delivery Method"}),e.jsx($e,{value:r.deliveryMethod,onChange:d=>l("deliveryMethod",d),children:e.jsxs(se,{direction:"row",children:[e.jsx(J,{value:"pickup",children:"Pickup"}),e.jsx(J,{value:"delivery",children:"Delivery"})]})})]}),e.jsxs(k,{id:"droplocation",isRequired:!0,mt:4,children:[e.jsx(A,{children:"Drop Location"}),e.jsx(x,{children:r==null?void 0:r.dropLocationName}),e.jsx(O,{borderRadius:"4px",bg:"#029CFF",color:"#fff",_hover:{background:"blue.500"},onClick:u,children:"Open Map Now"}),i&&e.jsx(tr,{data:{dropLocation:r.dropLocation,dropLocationName:r.dropLocationName||""},isOpen:i,onClose:m})]}),e.jsxs(k,{id:"note-from-customer",mt:4,children:[e.jsx(A,{children:"Note from Customer"}),e.jsx(ue,{type:"text",value:r.noteFromCustomer,onChange:d=>l("noteFromCustomer",d.target.value),placeholder:"Any special instructions?"})]}),e.jsxs(n,{display:"flex",justifyContent:"center",children:[e.jsx(O,{mt:4,width:"70%",background:"#029CFF",color:"white",_hover:{color:"#029CFF",bg:"whitesmoke"},type:"submit",children:"Add Address"}),e.jsx(O,{m:4,width:"10%",background:"#029CFF",color:"white",_hover:{color:"#029CFF",bg:"whitesmoke"},onClick:h,children:"Auto Fill"})]})]})})};nr.propTypes={goToNextStep:F.func.isRequired};const or=({goToNextStep:s,goToPreviousStep:o})=>{const i=q("white","gray.800"),u=q("gray.200","gray.700"),m=q("gray.800","white"),f=P(t=>t==null?void 0:t.OrderItemReducer),a=T.useMemo(()=>f==null?void 0:f.items,[f]);return e.jsxs("div",{children:[e.jsx(z,{children:"Your Cart Items"}),e.jsx(n,{children:a==null?void 0:a.map((t,r)=>{const{pic:S,orderName:j,quantity:l,priceVal:C,priceUnit:h}=t,D=l*C,d=h==="Euro"?" €":h;return e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",mb:4,boxShadow:"md",bg:i,borderColor:u,children:e.jsxs(n,{p:"4",children:[e.jsx(M,{justifyContent:"space-between",alignItems:"center",children:e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(Z,{borderRadius:"md",boxSize:"50px",src:S,alt:"Food Image",mr:4}),e.jsxs(n,{children:[e.jsx(x,{fontSize:"lg",fontWeight:"bold",as:"h4",lineHeight:"tight",color:m,isTruncated:!0,children:j}),e.jsxs(x,{fontSize:"md",fontWeight:"medium",as:"h5",lineHeight:"tight",color:m,isTruncated:!0,children:[l," X ",C,d]})]})]})}),e.jsx(n,{display:"flex",justifyContent:"flex-end",mt:2,children:e.jsxs(x,{fontWeight:"medium",color:m,children:[D," ",d]})})]})},r)})}),e.jsx(O,{onClick:o,children:"Back to Address"}),e.jsx(O,{onClick:s,children:"Forward to Summary"})]})};or.propTypes={goToNextStep:F.func.isRequired,goToPreviousStep:F.func.isRequired};const ir=({goToPreviousStep:s})=>{var d,E;const o=H(),i=q("white","gray.800"),u=q("gray.200","gray.700"),m=q("gray.800","white"),f=U(),a=ve(),t=P(c=>c.form),r=JSON.parse(localStorage.getItem("ProfileData")),S=(d=r==null?void 0:r.result)==null?void 0:d._id,j=(E=r==null?void 0:r.result)==null?void 0:E.role,l=P(c=>c==null?void 0:c.OrderItemReducer),C=l==null?void 0:l.items,h=l==null?void 0:l.total,D=c=>{c.preventDefault();const w={...t,orderItems:C,totalPrice:h,created_by:S};f(Yr(w)).then(g=>{g.success?(f(es()),f(Te()),a(j==="admin"?"/admin/order-history":"/employee/order-history"),o(g.message,"success")):o(g.message,"error")})};return e.jsxs(n,{p:4,children:[e.jsx(z,{mb:4,children:"Summary Page"}),e.jsxs(n,{mb:8,children:[e.jsx(z,{size:"md",mb:4,children:"Address Information"}),e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",boxShadow:"md",bg:i,borderColor:u,p:4,children:Object.entries(t).filter(([c])=>!["dropLocation","created_by","lat","lng"].includes(c)).map(([c,w])=>e.jsxs(x,{mb:2,children:[e.jsxs("strong",{children:[c.replace(/([A-Z])/g," $1").replace(/^./,g=>g.toUpperCase()),":"]})," ",w.replace(/([A-Z])/g," $1").replace(/^./,g=>g.toUpperCase())]},c))})]}),e.jsxs(n,{mb:8,children:[e.jsx(z,{size:"md",mb:4,children:"Your Cart Items"}),C.map((c,w)=>e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",mb:4,boxShadow:"md",bg:i,borderColor:u,p:4,children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",children:[e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(Z,{borderRadius:"md",boxSize:"50px",src:c.pic,alt:"Food Image",mr:4}),e.jsxs(n,{children:[e.jsx(x,{fontSize:"lg",fontWeight:"bold",as:"h4",lineHeight:"tight",color:m,isTruncated:!0,children:c.orderName}),e.jsxs(x,{fontSize:"md",fontWeight:"medium",as:"h5",lineHeight:"tight",color:m,isTruncated:!0,children:[c.quantity," X ",c.priceVal," ",c.priceUnit]})]})]}),e.jsxs(x,{fontWeight:"medium",color:m,children:[c.quantity*c.priceVal," ",c.priceUnit]})]})},w))]}),e.jsxs(n,{children:[e.jsx(z,{size:"md",mb:4,children:"Order Summary"}),e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",boxShadow:"md",bg:i,borderColor:u,p:4,children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(x,{color:m,children:"Total Amount:"}),e.jsxs(x,{fontWeight:"bold",color:m,children:[h," Euro"]})]})})]}),e.jsxs(se,{direction:"row",spacing:4,mt:8,children:[e.jsx(O,{onClick:s,colorScheme:"gray",children:"Previous"}),e.jsx(O,{onClick:D,colorScheme:"blue",children:"Confirm Order"})]})]})};ir.propTypes={goToPreviousStep:F.func.isRequired};const rs=({isOpen:s,onClose:o})=>{const i=[{title:"Address",description:"Add Address",component:nr},{title:"Items",description:"Added Items",component:or},{title:"Summary",description:"Order Summary",component:ir}],{activeStep:u,setActiveStep:m}=pe({index:0,count:i.length}),f=a=>{m(t=>Math.max(0,Math.min(t+a,i.length-1)))};return e.jsxs(X,{onClose:o,isOpen:s,size:"full",children:[e.jsx(K,{}),e.jsxs(Q,{children:[e.jsx(te,{}),e.jsx(B,{children:"Checkout"}),e.jsxs(G,{children:[e.jsx(xe,{size:"lg",colorScheme:"yellow",index:u,children:i.map(({title:a,description:t},r)=>e.jsxs(je,{children:[e.jsx(ge,{children:e.jsx(fe,{complete:"✅",incomplete:"😅",active:"📍"})}),e.jsxs(n,{flexShrink:"0",children:[e.jsx(be,{children:a}),e.jsx(ye,{children:t})]}),e.jsx(Se,{})]},r))}),e.jsx(n,{mt:4,children:Ie.createElement(i[u].component,{goToNextStep:()=>f(1),goToPreviousStep:()=>f(-1)})})]})]})]})},ss={"@keyframes bounce":{"0%, 20%, 50%, 80%, 100%":{transform:"translateY(0)"},"40%":{transform:"translateY(-30px)"},"60%":{transform:"translateY(-15px)"}}},ar=({message:s})=>e.jsxs(n,{textAlign:"center",py:10,px:6,mt:"12rem",children:[e.jsx(n,{as:"div",className:"cart-icon",width:"50px",height:"50px",margin:"0 auto",mb:6,position:"relative",sx:{animation:"bounce 2s infinite",...ss},"aria-label":"Empty cart icon",children:e.jsx(Ur,{size:"100%",color:"gray"})}),e.jsx(z,{as:"h2",size:"xl",mt:6,mb:2,color:"gray.500",children:"Your Cart is Empty"}),e.jsx(x,{color:"gray.500",children:s||"Looks like you haven't added anything to your cart yet."})]});ar.propTypes={message:F.string};const Ee=T.memo(ar),Ke=(s,o)=>`${parseFloat(s).toFixed(2)} ${o==="Euro"?"€":o}`,ke=({item:s,onRemoveCompletely:o,onAdd:i,onRemove:u})=>e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",mb:3,children:e.jsxs(n,{p:"6",children:[e.jsxs(M,{justifyContent:"space-between",alignItems:"center",children:[e.jsxs(M,{alignItems:"center",children:[e.jsx(Z,{borderRadius:"full",boxSize:"50px",src:s==null?void 0:s.pic,alt:"Food-Image"}),e.jsxs(n,{ml:"1rem",children:[e.jsx(x,{fontWeight:"semibold",as:"h4",isTruncated:!0,children:s==null?void 0:s.orderName}),e.jsxs(x,{fontWeight:"semibold",as:"h4",isTruncated:!0,children:[s==null?void 0:s.quantity," X ",Ke(s==null?void 0:s.priceVal,s==null?void 0:s.priceUnit)]})]}),e.jsx(Br,{size:"20",style:{marginLeft:"8px",cursor:"pointer",color:"red"},onClick:()=>o(s._id)})]}),e.jsxs(M,{background:"#fa4a0c",color:"white",gap:"1rem",borderRadius:"10px",p:"4px 8px",alignItems:"center",children:[e.jsx(x,{style:{cursor:"pointer",userSelect:"none",fontSize:"24px"},onClick:()=>i(s),children:"+"}),e.jsx(x,{style:{cursor:"pointer",userSelect:"none",fontSize:"24px"},onClick:()=>u(s._id),children:"-"})]})]}),e.jsx(n,{display:"flex",justifyContent:"end",mt:"0.5rem",children:Ke((s==null?void 0:s.quantity)*(s==null?void 0:s.priceVal),s==null?void 0:s.priceUnit)})]})}),cr=({isOpen:s,onClose:o})=>{const{isOpen:i,onOpen:u,onClose:m}=Y(),[f]=T.useState("right"),a=U(),t=P(h=>h==null?void 0:h.OrderItemReducer),r=T.useMemo(()=>(t==null?void 0:t.items)||[],[t]),S=T.useMemo(()=>(t==null?void 0:t.total)||0,[t]),j=h=>{h&&a({type:"REMOVE_ORDER_ITEM_TEMP_COMPLETELY",data:h})},l=h=>{h&&a({type:"REMOVE_ORDER_ITEM_TEMP",data:h})},C=h=>{h&&a({type:"ADD_ORDER_ITEM_TEMP",data:h})};return e.jsxs(X,{placement:f,onClose:o,isOpen:s,size:"md",children:[e.jsx(K,{}),e.jsxs(Q,{children:[e.jsx(B,{borderBottomWidth:"1px",children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",children:[e.jsx(x,{ml:"2",children:"Your Cart"}),e.jsx(Ce,{icon:e.jsx(Re,{}),onClick:o,variant:"ghost"})]})}),e.jsx(G,{children:e.jsx(n,{height:"70vh",overflowY:"scroll",children:r.length>0?e.jsxs(e.Fragment,{children:[r.map((h,D)=>e.jsx(ke,{item:h,onRemoveCompletely:j,onAdd:C,onRemove:l},D)),e.jsxs(n,{display:"flex",flexDirection:"column",position:"absolute",bottom:"0",p:"1rem",width:"90%",children:[e.jsxs(n,{display:"flex",justifyContent:"space-between",p:"1rem",borderTopWidth:"1px",children:[e.jsx(x,{fontWeight:"bold",fontSize:"2xl",children:"Subtotal :"}),e.jsxs(x,{fontWeight:"bold",fontSize:"2xl",color:"#029CFF",children:[parseFloat(S).toFixed(2)," €"]})]}),e.jsx(rs,{allOrderItems:t,AllOrderItemsTotal:S,onOpen:u,onClose:m,isOpen:i}),e.jsx(O,{background:"#029CFF",color:"white",_hover:{color:"#029CFF",bg:"whitesmoke"},onClick:u,children:"Checkout"})]})]}):e.jsx(Ee,{})})})]})]})};cr.propTypes={isOpen:F.bool.isRequired,onClose:F.func.isRequired};const Xe=s=>{var g;const o={orderName:"",priceVal:"",priceUnit:"",description:"",isFavourite:""},i=H(),{isOpen:u,onClose:m,onSubmitData:f,isDrink:a,data:t}=s,[r,S]=T.useState(o),[j,l]=T.useState(!1),C=JSON.parse(localStorage.getItem("ProfileData")),h=(g=C==null?void 0:C.result)==null?void 0:g._id,D=()=>{if(a)S({orderName:"Coke",priceVal:2,priceUnit:"Euro",description:"This is coke",isFavourite:!0,pic:r.pic});else{const p=["Mix Veg","Normal Dal","Paneer Tikka","Dal Makhani"],y=[10,15,20,25],R=["This is Mix Veg","This is Normal Dal","This is Paneer Tikka","This is Dal Makhani"];S({orderName:p[Math.floor(Math.random()*p.length)],priceVal:y[Math.floor(Math.random()*y.length)],priceUnit:"Euro",description:R[Math.floor(Math.random()*R.length)],isFavourite:!0,pic:r.pic})}};T.useEffect(()=>(t!=null&&S(p=>({...p,orderName:(t==null?void 0:t.orderName)||"",priceVal:(t==null?void 0:t.priceVal)||"",priceUnit:(t==null?void 0:t.priceUnit)||"",description:(t==null?void 0:t.description)||"",isFavourite:t==null?void 0:t.isFavourite,pic:t.pic,created_by:t.created_by})),()=>S(o)),[t]);const d=()=>{m(),S(o)},E=async p=>{if(l(!0),p===void 0){i("Please upload a picture","error"),l(!1);return}if(p.type!=="image/jpeg"&&p.type!=="image/png"){i("Invalid image format","error"),l(!1);return}if(p.size>2e6)return l(!1),i("Image size should be less than 2 MB ","error");const y=new FormData;y.append("file",p),y.append("upload_preset","restro-website"),y.append("cloud_name","dezifvepx"),fetch("https://api.cloudinary.com/v1_1/dezifvepx/image/upload",{method:"post",body:y}).then(R=>R.json()).then(R=>{S(V=>({...V,pic:R.url.toString()})),l(!1)}).catch(R=>(l(!1),i(R.message,"error")))},c=p=>{const{name:y,value:R}=p.target;S(V=>({...V,[y]:R}))},w=p=>{if(r.isDrink=a,r.created_by=h,r.priceUnit===""||r.orderName===""||r.priceVal===""){i("Please fill all the required fields","error");return}p.preventDefault(),f(r),d()};return e.jsx(e.Fragment,{children:e.jsx(Qe,{isCentered:!0,isOpen:u,onClose:d,children:e.jsxs(er,{children:[e.jsx(B,{children:"Add Drinks"}),e.jsx(O,{onClick:D,children:"Auto Fill"}),e.jsx(te,{}),e.jsx(G,{children:e.jsx(n,{maxW:"sm",m:"auto",p:"4",borderWidth:"1px",borderRadius:"lg",background:"whiteAlpha.100",children:e.jsxs("form",{onSubmit:w,children:[e.jsxs(k,{id:"orderName",isRequired:!0,children:[e.jsx(A,{children:"Item Name"}),e.jsx(N,{type:"text",name:"orderName",onChange:c,value:r.orderName,required:!0})]}),e.jsxs(k,{id:"priceVal",isRequired:!0,children:[e.jsx(A,{children:"Price Value"}),e.jsx(N,{type:"number",name:"priceVal",onChange:c,min:0,value:r.priceVal,required:!0})]}),e.jsxs(k,{id:"priceUnit",children:[e.jsx(A,{children:"Price Unit"}),e.jsxs(Be,{name:"priceUnit",onChange:c,value:r.priceUnit,required:!0,children:[e.jsx("option",{value:"",children:" Select Price Unit "}),e.jsx("option",{value:"Euro",children:"Euro"})]})]}),e.jsxs(k,{id:"description",children:[e.jsx(A,{children:"Description"}),e.jsx(ue,{type:"text",name:"description",onChange:c,value:r.description})]}),e.jsxs(k,{id:"isFavourite",children:[e.jsx(A,{children:"Favourite"}),e.jsxs(Be,{name:"isFavourite",onChange:c,value:r.isFavourite,children:[e.jsx("option",{value:"",children:" Select Favourite "}),e.jsx("option",{value:!1,children:"No"}),e.jsx("option",{value:!0,children:"Yes"})]})]}),e.jsxs(k,{id:"pic",children:[e.jsx(A,{children:"Upload Picture"}),e.jsx(N,{type:"file",accept:"image/*",onChange:p=>E(p.target.files[0])})]}),e.jsx(x,{children:r.pic}),t?e.jsxs(e.Fragment,{children:[e.jsx(O,{mt:"4",mr:2,colorScheme:"blue",type:"submit",isLoading:j,children:"Update Item"}),e.jsx(O,{mt:"4",colorScheme:"red",onClick:m,children:"Cancel"})]}):e.jsx(O,{mt:"4",colorScheme:"blue",type:"submit",isLoading:j,children:"Add Item"})]})})})]})})})},ts=s=>({type:"SET_DINE_IN_FORM_DATA",data:s}),ns=()=>({type:"RESET_DINE_IN_FORM_DATA"}),lr=({goToNextStep:s})=>{const o=U(),i=H(),u=P(h=>h.dineInForm),{tableNumber:m,numberOfGuests:f,customerName:a,phoneNumber:t,emailAddress:r,specialRequests:S}=u,j=T.useCallback((h,D)=>{o(ts({[h]:D}))},[o]),l=()=>m?f?t&&t.length!==10?(i("Phone number must be 10 digits long","error"),!1):!0:(i("Please enter number of guests","error"),!1):(i("Please enter table number","error"),!1),C=h=>{h.preventDefault(),l()&&s()};return e.jsx("form",{onSubmit:C,children:e.jsxs(n,{mt:10,children:[e.jsxs(sr,{columns:{base:1,md:2},spacing:4,children:[e.jsxs(k,{id:"tableNumber",mb:4,isRequired:!0,children:[e.jsx(A,{children:"Table Number"}),e.jsx(N,{type:"number",placeholder:"Enter table number",value:m,onChange:h=>j("tableNumber",h.target.value),required:!0})]}),e.jsxs(k,{id:"numberOfGuests",mb:4,isRequired:!0,children:[e.jsx(A,{children:"Number of Guests"}),e.jsx(N,{type:"number",placeholder:"Enter number of guests",value:f,onChange:h=>j("numberOfGuests",h.target.value),required:!0})]}),e.jsxs(k,{id:"customerName",mb:4,children:[e.jsx(A,{children:"Customer Name"}),e.jsx(N,{type:"text",placeholder:"Enter customer name (optional)",value:a,onChange:h=>j("customerName",h.target.value)})]}),e.jsxs(k,{id:"phoneNumber",mb:4,children:[e.jsx(A,{children:"Phone Number"}),e.jsx(N,{type:"text",placeholder:"Enter phone number (optional)",value:t,onChange:h=>j("phoneNumber",h.target.value)})]}),e.jsxs(k,{id:"emailAddress",mb:4,children:[e.jsx(A,{children:"Email Address"}),e.jsx(N,{type:"email",placeholder:"Enter email address (optional)",value:r,onChange:h=>j("emailAddress",h.target.value)})]}),e.jsxs(k,{id:"specialRequests",mb:4,children:[e.jsx(A,{children:"Special Requests"}),e.jsx(ue,{placeholder:"Enter any special requests (e.g., seating preferences, allergies)",value:S,onChange:h=>j("specialRequests",h.target.value)})]})]}),e.jsx(O,{colorScheme:"cyan",type:"submit",mt:4,children:"Submit"})]})})};lr.propTypes={goToNextStep:F.func.isRequired};const dr=({goToPreviousStep:s})=>{var d,E;const o=q("white","gray.800"),i=q("gray.200","gray.700"),u=q("gray.800","white"),m=U(),f=ve(),a=H(),t=P(c=>c.dineInForm),r=JSON.parse(localStorage.getItem("ProfileData")),S=(d=r==null?void 0:r.result)==null?void 0:d._id,j=(E=r==null?void 0:r.result)==null?void 0:E.role,l=P(c=>c==null?void 0:c.OrderItemReducer),C=l==null?void 0:l.items,h=l==null?void 0:l.total,D=c=>{c.preventDefault();const w={...t,orderItems:C,totalPrice:h,created_by:S};m(Vr(w)).then(g=>{g.success?(m(ns()),m(Te()),f(j==="admin"?"/admin/order-history":"/employee/order-history"),a(g.message,"success")):a(g.message,"error")})};return e.jsxs(n,{p:4,children:[e.jsx(z,{mb:4,children:"Dine-In Summary"}),e.jsxs(n,{mb:8,children:[e.jsx(z,{size:"md",mb:4,children:"Dine-In Information"}),e.jsxs(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",boxShadow:"md",bg:o,borderColor:i,p:4,children:[e.jsxs(x,{mb:2,children:[e.jsx("strong",{children:"Table Number:"})," ",t.tableNumber]}),e.jsxs(x,{mb:2,children:[e.jsx("strong",{children:"Number of Guests:"})," ",t.numberOfGuests]}),t.customerName&&e.jsxs(x,{mb:2,children:[e.jsx("strong",{children:"Customer Name:"})," ",t.customerName]}),t.phoneNumber&&e.jsxs(x,{mb:2,children:[e.jsx("strong",{children:"Phone Number:"})," ",t.phoneNumber]}),t.emailAddress&&e.jsxs(x,{mb:2,children:[e.jsx("strong",{children:"Email Address:"})," ",t.emailAddress]}),t.specialRequests&&e.jsxs(x,{mb:2,children:[e.jsx("strong",{children:"Special Requests:"})," ",t.specialRequests]})]})]}),e.jsxs(n,{mb:8,children:[e.jsx(z,{size:"md",mb:4,children:"Your Cart Items"}),C.map((c,w)=>e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",mb:4,boxShadow:"md",bg:o,borderColor:i,p:4,children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",children:[e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(Z,{borderRadius:"md",boxSize:"50px",src:c.pic,alt:"Food Image",mr:4}),e.jsxs(n,{children:[e.jsx(x,{fontSize:"lg",fontWeight:"bold",as:"h4",lineHeight:"tight",color:u,isTruncated:!0,children:c.orderName}),e.jsxs(x,{fontSize:"md",fontWeight:"medium",as:"h5",lineHeight:"tight",color:u,isTruncated:!0,children:[c.quantity," X ",c.priceVal," ",c.priceUnit]})]})]}),e.jsxs(x,{fontWeight:"medium",color:u,children:[c.quantity*c.priceVal," ",c.priceUnit]})]})},w))]}),e.jsxs(n,{children:[e.jsx(z,{size:"md",mb:4,children:"Order Summary"}),e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",boxShadow:"md",bg:o,borderColor:i,p:4,children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(x,{color:u,children:"Total Amount:"}),e.jsxs(x,{fontWeight:"bold",color:u,children:[h," Euro"]})]})})]}),e.jsxs(se,{direction:"row",spacing:4,mt:8,children:[e.jsx(O,{onClick:s,colorScheme:"gray",children:"Previous"}),e.jsx(O,{onClick:D,colorScheme:"blue",children:"Confirm Dine-In Order"})]})]})};dr.propTypes={goToPreviousStep:F.func.isRequired};const os=({isOpen:s,onClose:o})=>{const i=[{title:"DineIn Details",description:"Add DineIn Details",component:lr},{title:"Summary",description:"Order Summary",component:dr}],{activeStep:u,setActiveStep:m}=pe({index:0,count:i.length}),f=a=>{m(t=>Math.max(0,Math.min(t+a,i.length-1)))};return e.jsxs(X,{placement:"left",onClose:o,isOpen:s,size:"full",children:[e.jsx(K,{}),e.jsxs(Q,{children:[e.jsx(te,{}),e.jsx(B,{children:"Checkout-DineIn"}),e.jsxs(G,{children:[e.jsx(xe,{size:"lg",colorScheme:"yellow",index:u,children:i.map(({title:a,description:t},r)=>e.jsxs(je,{children:[e.jsx(ge,{children:e.jsx(fe,{complete:"✅",incomplete:"😅",active:"📍"})}),e.jsxs(n,{flexShrink:"0",children:[e.jsx(be,{children:a}),e.jsx(ye,{children:t})]}),e.jsx(Se,{})]},r))}),e.jsx(n,{mt:4,children:Ie.createElement(i[u].component,{goToNextStep:()=>f(1),goToPreviousStep:()=>f(-1)})})]})]})]})},is=s=>{const o=s.isOpen,i=s.onClose,{isOpen:u,onOpen:m,onClose:f}=Y(),[a,t]=T.useState("left"),r=U(),S=P(d=>d==null?void 0:d.OrderItemReducer),j=S==null?void 0:S.items,l=S==null?void 0:S.total,C=d=>{d!==void 0&&r({type:"REMOVE_ORDER_ITEM_TEMP_COMPLETELY",data:d})},h=d=>{d!==void 0&&r({type:"REMOVE_ORDER_ITEM_TEMP",data:d})},D=d=>{d!==void 0&&r({type:"ADD_ORDER_ITEM_TEMP",data:d})};return e.jsx("div",{children:e.jsx(e.Fragment,{children:e.jsxs(X,{placement:a,onClose:i,isOpen:o,size:"md",children:[e.jsx(K,{}),e.jsxs(Q,{children:[e.jsx(B,{borderBottomWidth:"1px",children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",children:[e.jsxs(M,{alignItems:"center",children:[e.jsx(Oe,{}),e.jsx(x,{marginLeft:"2",children:"Your Cart"})]}),e.jsx(Ce,{icon:e.jsx(Re,{}),onClick:i,variant:"ghost"})]})}),e.jsx(G,{children:e.jsx(n,{height:"60vh",overflowY:"scroll",children:(j==null?void 0:j.length)>0?e.jsxs(e.Fragment,{children:[j.map((d,E)=>e.jsx(ke,{item:d,onRemoveCompletely:C,onAdd:D,onRemove:h},E)),e.jsxs(n,{display:"flex",flexDirection:"column",position:"absolute",bottom:"0",padding:"1rem",width:"90%",children:[e.jsxs(n,{display:"flex",justifyContent:"space-between",padding:"1rem",borderTopWidth:"1px",children:[e.jsx(x,{fontWeight:"bold",fontSize:"2xl",children:"Subtotal :"}),e.jsxs(x,{fontWeight:"bold",fontSize:"2xl",color:"#029CFF",children:[parseFloat(l).toFixed(2)," €"]})]}),e.jsx(os,{allOrderItems:S,AllOrderItemsTotal:l,onOpen:m,onClose:f,isOpen:u}),e.jsx(O,{background:"#029CFF",color:"white",_hover:{color:"#029CFF",bg:"whitesmoke"},onClick:m,children:"Checkout"})]})]}):e.jsx(Ee,{})})})]})]})})})},as=s=>({type:"SET_TAKE_AWAY_FORM_DATA",payload:s}),cs=()=>({type:"RESET_TAKE_AWAY_FORM_DATA"}),hr=({goToNextStep:s})=>{const o=U(),i=H(),u=P(r=>r.takeAwayForm),{customerName:m}=u,f=T.useCallback((r,S)=>{o(as({[r]:S}))},[o]),a=()=>m?!0:(i("Please enter customer name","error"),!1),t=r=>{r.preventDefault(),a()&&s()};return e.jsx("form",{onSubmit:t,children:e.jsxs(n,{mt:10,children:[e.jsx(sr,{spacing:4,children:e.jsxs(k,{id:"customerName",mb:4,isRequired:!0,children:[e.jsx(A,{children:"Customer Name"}),e.jsx(N,{type:"text",placeholder:"Enter customer name",value:m,onChange:r=>f("customerName",r.target.value),required:!0})]})}),e.jsx(O,{colorScheme:"cyan",type:"submit",mt:4,children:"Submit"})]})})};hr.propTypes={goToNextStep:F.func.isRequired};const mr=({goToPreviousStep:s})=>{var d,E;const o=q("white","gray.800"),i=q("gray.200","gray.700"),u=q("gray.800","white"),m=U(),f=ve(),a=H(),t=P(c=>c.takeAwayForm),r=JSON.parse(localStorage.getItem("ProfileData")),S=(d=r==null?void 0:r.result)==null?void 0:d._id,j=(E=r==null?void 0:r.result)==null?void 0:E.role,l=P(c=>c==null?void 0:c.OrderItemReducer),C=l==null?void 0:l.items,h=l==null?void 0:l.total,D=c=>{c.preventDefault();const w={...t,orderItems:C,totalPrice:h,created_by:S};m($r(w)).then(g=>{g.success?(m(cs()),m(Te()),f(j==="admin"?"/admin/order-history":"/employee/order-history"),a(g.message,"success")):a(g.message,"error")})};return e.jsxs(n,{p:4,children:[e.jsx(z,{mb:4,children:"Take-Away Summary"}),e.jsxs(n,{mb:8,children:[e.jsx(z,{size:"md",mb:4,children:"TakeAway Information"}),e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",boxShadow:"md",bg:o,borderColor:i,p:4,children:t.customerName&&e.jsxs(x,{mb:2,children:[e.jsx("strong",{children:"Customer Name:"})," ",t.customerName]})})]}),e.jsxs(n,{mb:8,children:[e.jsx(z,{size:"md",mb:4,children:"Your Cart Items"}),C.map((c,w)=>e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",mb:4,boxShadow:"md",bg:o,borderColor:i,p:4,children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",children:[e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(Z,{borderRadius:"md",boxSize:"50px",src:c.pic,alt:"Food Image",mr:4}),e.jsxs(n,{children:[e.jsx(x,{fontSize:"lg",fontWeight:"bold",as:"h4",lineHeight:"tight",color:u,isTruncated:!0,children:c.orderName}),e.jsxs(x,{fontSize:"md",fontWeight:"medium",as:"h5",lineHeight:"tight",color:u,isTruncated:!0,children:[c.quantity," X ",c.priceVal," ",c.priceUnit]})]})]}),e.jsxs(x,{fontWeight:"medium",color:u,children:[c.quantity*c.priceVal," ",c.priceUnit]})]})},w))]}),e.jsxs(n,{children:[e.jsx(z,{size:"md",mb:4,children:"Order Summary"}),e.jsx(n,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",boxShadow:"md",bg:o,borderColor:i,p:4,children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(x,{color:u,children:"Total Amount:"}),e.jsxs(x,{fontWeight:"bold",color:u,children:[h," Euro"]})]})})]}),e.jsxs(se,{direction:"row",spacing:4,mt:8,children:[e.jsx(O,{onClick:s,colorScheme:"gray",children:"Previous"}),e.jsx(O,{onClick:D,colorScheme:"blue",children:"Confirm Take-Away Order"})]})]})};mr.propTypes={goToPreviousStep:F.func.isRequired};const ls=({isOpen:s,onClose:o})=>{const i=[{title:"TakeAway Details",description:"Add DineIn Details",component:hr},{title:"Summary",description:"Order Summary",component:mr}],{activeStep:u,setActiveStep:m}=pe({index:0,count:i.length}),f=a=>{m(t=>Math.max(0,Math.min(t+a,i.length-1)))};return e.jsxs(X,{placement:"bottom",onClose:o,isOpen:s,size:"full",children:[e.jsx(K,{}),e.jsxs(Q,{children:[e.jsx(te,{}),e.jsx(B,{children:"Checkout-TakeAway"}),e.jsxs(G,{children:[e.jsx(xe,{size:"lg",colorScheme:"yellow",index:u,children:i.map(({title:a,description:t},r)=>e.jsxs(je,{children:[e.jsx(ge,{children:e.jsx(fe,{complete:"✅",incomplete:"😅",active:"📍"})}),e.jsxs(n,{flexShrink:"0",children:[e.jsx(be,{children:a}),e.jsx(ye,{children:t})]}),e.jsx(Se,{})]},r))}),e.jsx(n,{mt:4,children:Ie.createElement(i[u].component,{goToNextStep:()=>f(1),goToPreviousStep:()=>f(-1)})})]})]})]})},ds=(s,o)=>`${parseFloat(s).toFixed(2)} €`,hs=({isOpen:s,onClose:o})=>{const{isOpen:i,onOpen:u,onClose:m}=Y(),f=U(),a=P(C=>C==null?void 0:C.OrderItemReducer),{items:t,total:r}=a,S=C=>f({type:"REMOVE_ORDER_ITEM_TEMP_COMPLETELY",data:C}),j=C=>f({type:"REMOVE_ORDER_ITEM_TEMP",data:C}),l=C=>f({type:"ADD_ORDER_ITEM_TEMP",data:C});return e.jsxs(X,{placement:"bottom",onClose:o,isOpen:s,size:"md",children:[e.jsx(K,{}),e.jsxs(Q,{children:[e.jsx(B,{borderBottomWidth:"1px",children:e.jsxs(M,{justifyContent:"space-between",alignItems:"center",children:[e.jsxs(M,{alignItems:"center",children:[e.jsx(Oe,{}),e.jsx(x,{ml:"2",children:"Your Cart"})]}),e.jsx(Ce,{icon:e.jsx(Re,{}),onClick:o,variant:"ghost"})]})}),e.jsx(G,{children:e.jsx(n,{height:"70vh",overflowY:"scroll",children:(t==null?void 0:t.length)>0?e.jsxs(e.Fragment,{children:[t.map((C,h)=>e.jsx(ke,{item:C,onRemoveCompletely:S,onAdd:l,onRemove:j},h)),e.jsxs(n,{display:"flex",flexDirection:"column",position:"absolute",bottom:"0",p:"1rem",w:"90%",children:[e.jsxs(n,{display:"flex",justifyContent:"space-between",p:"1rem",borderTopWidth:"1px",children:[e.jsx(x,{fontWeight:"bold",fontSize:"2xl",children:"Subtotal:"}),e.jsx(x,{fontWeight:"bold",fontSize:"2xl",color:"#029CFF",children:ds(r)})]}),e.jsx(ls,{allOrderItems:a,AllOrderItemsTotal:r,onOpen:u,onClose:m,isOpen:i}),e.jsx(O,{background:"#029CFF",color:"white",_hover:{color:"#029CFF",bg:"whitesmoke"},onClick:u,children:"Checkout"})]})]}):e.jsx(Ee,{})})})]})]})};function Ts(){var Ue,Ye;const s=P(v=>{var I;return(I=v.OrderItemReducer)==null?void 0:I.length}),o=P(v=>{var I;return(I=v==null?void 0:v.userReducer)==null?void 0:I.data}),i=H(),{isOpen:u,onOpen:m,onClose:f}=Y(),{isOpen:a,onOpen:t,onClose:r}=Y(),{isOpen:S,onOpen:j,onClose:l}=Y(),{isOpen:C,onOpen:h,onClose:D}=Y(),{isOpen:d,onOpen:E,onClose:c}=Y(),{isOpen:w,onOpen:g,onClose:p}=Y(),y=U(),R=(Ye=(Ue=JSON.parse(localStorage.getItem("ProfileData")))==null?void 0:Ue.result)==null?void 0:Ye._id,[V,Ae]=T.useState({searchTerm:"",searchResults:[],searchPerformed:!1}),[re,De]=T.useState({searchTerm:"",searchResults:[],searchPerformed:!1}),[ur,pr]=T.useState(0),[xr,oe]=T.useState([]),[jr,ie]=T.useState([]),[gr,we]=T.useState(!1),[_e,ae]=T.useState(null),[Ne,ce]=T.useState(null),[Fe,fr]=T.useState(!1),[br,Me]=T.useState(!0),[Pe,yr]=T.useState(!0),Sr=T.useCallback(v=>{const{searchTerm:I}=v?re:V;y((v?Qr:Xr)(I)).then(L=>{L.success?(v?De:Ae)($=>({...$,searchResults:L==null?void 0:L.data})):console.error("Search error: "+L.message)})},[y,V,re]),Cr=()=>{g(),Me(!0)},le=v=>{if(!(o!=null&&o.isVerified)&&(o==null?void 0:o.role)==="admin"){Me(!1);return}v===1?h():v===2?t():E()},ze=v=>{v.created_by=R;const I=_e||Ne,_=y(I?Zr(I._id,v):Jr(v));ae(null),ce(null);const L=_.then(b=>{if(b.success){const $=v.isDrink?me:he;y($()).then(W=>{W.success?v.isDrink?ie(W==null?void 0:W.data):oe(W==null?void 0:W.data):console.error("Error fetching data")})}else throw new Error(b.message)});Ge.promise(L,{pending:I?"Processing Edit of Item...":"Processing Addition of Item...",success:I?"Item Edited Successfully":"Item Added Successfully",error:b=>b.message})},Le=v=>{v&&(pr(ur+v.priceVal),y({type:"ADD_ORDER_ITEM_TEMP",data:v}))},We=(v,I)=>{I?ce(v):ae(v),I?j():m()},qe=()=>{ae(null),ce(null),f(),l()},Ve=(v,I)=>{const _=I?ie:oe,L=I?me:he,b=y(Kr(v._id)).then($=>{if($.success)return y(L()).then(W=>{W.success?_(W==null?void 0:W.data):console.error("Error fetching data")}),$.message;throw new Error("Error Deleting Item")});Ge.promise(b,{pending:"Deleting Item...",success:"Item Deleted Successfully",error:"Error in Deleting Item"})};if(T.useEffect(()=>{(async()=>{we(!0);try{const[I,_]=await Promise.all([y(he()),y(me())]);!I.success||!_.success?(i(I.message||_.message,"error"),(I.status===403||_.status===403)&&yr(!1)):(oe(I.data),ie(_.data))}catch(I){console.error("Error fetching data:",I)}finally{we(!1)}})()},[y,i,R]),!Pe)return e.jsx(Hr,{isPermitted:Pe});const vr=v=>{const{searchTerm:I}=v?re:V,_=v?De:Ae;return e.jsxs(kr,{mb:"1rem",children:[e.jsx(Ar,{pointerEvents:"none",children:e.jsx(Lr,{size:"20"})}),e.jsx(Dr,{children:e.jsx(Wr,{size:"20",style:{cursor:"pointer"},onClick:()=>_({searchTerm:"",searchPerformed:!1})})}),e.jsx(N,{paddingLeft:"2.5rem",borderRadius:"50px",placeholder:"Search...",value:I,onChange:L=>{const b=L.target.value;_({searchTerm:b,searchPerformed:!!b}),b.trim()&&Sr(v)}})]})},Ir=(v,I)=>{const _=I?re.searchResults:V.searchResults;return(I?re.searchPerformed:V.searchPerformed)?e.jsx(rr,{mt:2,children:_==null?void 0:_.map((b,$)=>e.jsxs(n,{p:"4",mb:3,borderWidth:"1px",borderRadius:"lg",boxShadow:"sm",position:"relative",children:[e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(Z,{borderRadius:"full",boxSize:"50px",src:b==null?void 0:b.pic,alt:"Food-Image"}),e.jsxs(n,{ml:"1rem",children:[e.jsx(x,{fontWeight:"semibold",as:"h4",children:b==null?void 0:b.orderName}),e.jsxs(x,{fontWeight:"semibold",as:"h4",children:[b==null?void 0:b.priceVal," ",b==null?void 0:b.priceUnit]})]})]}),e.jsxs(n,{position:"relative",top:"0",right:"0",display:"flex",gap:"1rem",p:"1",children:[e.jsx(He,{cursor:"pointer",onClick:()=>We(b,I)}),e.jsx(Ze,{cursor:"pointer",color:"red.500",onClick:()=>Ve(b,I)})]}),e.jsx(n,{mt:"2",display:"flex",justifyContent:"end",children:e.jsx(O,{colorScheme:"teal",onClick:()=>Le(b),children:"Add To Cart"})})]},$))}):e.jsx(n,{mt:"1rem",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:6,children:v.map(b=>e.jsxs(n,{p:"4",borderWidth:"1px",borderRadius:"lg",boxShadow:"sm",display:"flex",flexDir:"column",children:[e.jsxs(n,{display:"flex",justifyContent:"space-between",children:[e.jsxs(n,{children:[e.jsx(Z,{borderRadius:"full",boxSize:"50px",src:b==null?void 0:b.pic,alt:"Food-Image"}),e.jsx(x,{mt:"1",fontWeight:"semibold",children:b==null?void 0:b.orderName}),e.jsxs(x,{fontSize:14,fontWeight:"normal",children:[b==null?void 0:b.priceVal," ",b==null?void 0:b.priceUnit]})]}),e.jsxs(n,{display:"flex",gap:"3",p:"1",flexDir:"column",children:[e.jsx(He,{cursor:"pointer",fontSize:20,onClick:()=>We(b,I)}),e.jsx(Ze,{cursor:"pointer",color:"red.500",fontSize:20,onClick:()=>Ve(b,I)})]})]}),e.jsx(O,{mt:"2",colorScheme:"teal",onClick:()=>Le(b),children:"Add To Cart"})]},b._id))})};return gr?e.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",children:e.jsx(Tr,{size:"xl"})}):e.jsxs(e.Fragment,{children:[!br&&e.jsxs(n,{bg:"red",color:"white",p:"0.5rem",textAlign:"center",fontSize:"18",animation:"blinking 1s ease 2",children:["Your restaurant is not verified. Please verify to begin checkout.",e.jsx(O,{ml:"1rem",colorScheme:"yellow",onClick:Cr,children:"Verify Now"})]}),e.jsxs(n,{mt:"2vw",p:"2rem",bg:"#f7f7f7",children:[e.jsx(qr,{}),e.jsxs(n,{display:"flex",justifyContent:"space-between",mb:"2rem",children:[e.jsx(O,{leftIcon:e.jsx(Je,{}),colorScheme:"teal",onClick:m,children:"Add Items"}),e.jsxs(n,{position:"relative",children:[e.jsx(O,{leftIcon:e.jsx(Oe,{}),colorScheme:"teal",onClick:()=>fr(!Fe),children:"Cart"}),e.jsx(Er,{position:"absolute",top:"-2",right:"-2",colorScheme:"teal",borderRadius:"full",children:s})]}),Fe&&e.jsxs(n,{children:[e.jsx(O,{onClick:()=>le(1),colorScheme:"yellow",variant:"solid",mr:2,children:"Dine-In"}),e.jsx(O,{onClick:()=>le(2),colorScheme:"orange",variant:"solid",mr:2,children:"Deliver"}),e.jsx(O,{onClick:()=>le(3),colorScheme:"red",variant:"solid",children:"TakeAway"})]}),e.jsx(O,{leftIcon:e.jsx(Je,{}),colorScheme:"teal",onClick:j,children:"Add Drinks"})]}),e.jsx(Xe,{isOpen:u,onClose:qe,isDrink:!1,onSubmitData:ze,data:_e}),e.jsx(Xe,{isOpen:S,onClose:qe,isDrink:!0,onSubmitData:ze,data:Ne}),e.jsx(n,{display:"flex",gap:"2rem",children:[{data:xr,isDrink:!1},{data:jr,isDrink:!0}].map((v,I)=>e.jsxs(n,{flex:"1",children:[vr(v.isDrink),Ir(v.data,v.isDrink)]},I))}),e.jsx(cr,{isOpen:a,onClose:r}),e.jsx(is,{isOpen:C,onClose:D}),e.jsx(hs,{isOpen:d,onClose:c}),e.jsx(Gr,{isOpen:w,onClose:p})]}),e.jsx("style",{children:`
          @keyframes blinking {
            0% { background-color: red; }
            50% { background-color: darkred; }
            100% { background-color: red; }
          }
        `})]})}export{Ts as default};
