import{u,j as e,F as h,B as W,H as G,Z as H,_ as V,$ as D,a0 as J,a1 as j,a2 as y,b as i,K,q as S,a3 as Q,I as U,o as f}from"./chakra-B_DUJliM.js";import{r as d,h as Y,N as _}from"./react-D9OIIVWL.js";import{Q as Z}from"./toast-D556Fe1H.js";import{P as X,p as ee}from"./index-DBk-HpAQ.js";/* empty css                      */import{A as oe,i as P}from"./login-img-Bm_easkU.js";import{r as te,M as se,x as ne,y as ae}from"./index-C674oLPn.js";import{R as re}from"./index.esm-D12NZOcQ.js";import{u as ie}from"./redux-BFEnBRFN.js";function ge(){const m=u("navy.700","white"),L="gray.400",T=u("navy.700","secondaryGray.600"),w=u("blue","white"),g=u("brand.500","brand.400"),[C,F]=d.useState("admin"),[b,A]=d.useState(!1),[n,c]=d.useState({email:"",password:"",country_code:"",phone:"",memberId:""}),[I,a]=d.useState(!1),l=te(),v=ie(),p=Y();d.useEffect(()=>{var t;a(!0);const o=JSON.parse(localStorage.getItem("ProfileData")),s=(t=o==null?void 0:o.result)==null?void 0:t.role;s==="admin"&&o?p("/admin/dashboards/default"):o&&z(s),a(!1)},[p]);const k=()=>A(!b),B=()=>{if(n.email)if(n.password){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email))return l("Please enter a valid email"),!1}else return l("Password is required"),!1;else return l("Email is required"),!1;return!0},N=o=>{if(o.preventDefault(),a(!0),!B())return;const s={email:n.email,password:n.password};v(ne(s)).then(t=>{a(!1),t.payload.success?p("/admin/dashboards/default"):l(t.payload,"error")}).catch(t=>{console.log("ERROR",t)})},z=o=>{const s=o.split(" ")[0].toLowerCase();p(`employee/${s}/dashboard/default`)},q=o=>{o.preventDefault(),a(!0);const s={phone:"+"+n.country_code+n.phone,country_code:n.country_code,membership_id:n.memberId};v(ae(s)).then(t=>{var r,x;if(a(!1),t.payload.success){const O=(x=(r=t==null?void 0:t.payload)==null?void 0:r.result)==null?void 0:x.role;z(O)}else l(t.payload,"error")})},R=o=>{const{name:s,value:t}=o.target;c(r=>({...r,[s]:t}))},E=(o,s,t="text",r="",x=!0)=>e.jsxs(j,{id:s,mb:"24px",children:[e.jsxs(y,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",color:m,mb:"8px",children:[o," ",e.jsx(i,{color:g,children:"*"})]}),e.jsx(S,{isRequired:x,variant:"auth",fontSize:"sm",placeholder:r,mb:"24px",fontWeight:"500",size:"lg",type:t,name:s,value:n[s],onChange:R})]}),$=()=>e.jsxs("form",{onSubmit:N,children:[E("Email","email","email","mail@example.com"),e.jsxs(j,{children:[e.jsxs(y,{ms:"4px",fontSize:"sm",fontWeight:"500",color:m,display:"flex",children:["Password",e.jsx(i,{color:g,children:"*"})]}),e.jsxs(K,{size:"md",children:[e.jsx(S,{isRequired:!0,fontSize:"sm",placeholder:"Enter Password",mb:"24px",size:"lg",type:b?"text":"password",variant:"auth",name:"password",value:n.password,onChange:R}),e.jsx(Q,{display:"flex",alignItems:"center",mt:"4px",children:e.jsx(U,{color:L,_hover:{cursor:"pointer"},as:b?re:se,onClick:k})})]})]}),e.jsx(h,{justifyContent:"end",align:"center",mb:"24px",children:e.jsx(_,{to:"/auth/forgot-password",children:e.jsx(i,{color:w,fontSize:"sm",w:"124px",fontWeight:"500",children:"Forgot password?"})})}),e.jsx(f,{type:"submit",fontSize:"sm",colorScheme:"blue",fontWeight:"500",w:"100%",h:"50",mb:"24px",isLoading:I,children:"Sign In"}),e.jsx(f,{fontSize:"sm",colorScheme:"green",fontWeight:"500",w:"100%",h:"50",mb:"24px",onClick:()=>{c({...n,email:"nizx@gmail.com",password:"123456"})},children:"Test Application"}),e.jsx(h,{flexDirection:"column",justifyContent:"center",alignItems:"start",maxW:"100%",mt:"0px",children:e.jsxs(i,{color:T,fontWeight:"400",fontSize:"14px",children:["Not registered yet?",e.jsx(_,{to:"/auth/sign-up",children:e.jsx(i,{color:w,as:"span",ms:"5px",fontWeight:"500",children:"Create an Account"})})]})})]}),M=()=>e.jsxs("form",{onSubmit:q,children:[e.jsxs(j,{id:"phone",children:[e.jsxs(y,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",color:m,mb:"8px",children:["Phone",e.jsx(i,{color:g,children:"*"})]}),e.jsx(W,{mb:"24px",borderRadius:"md",overflow:"hidden",children:e.jsx(X,{isRequired:!0,variant:"auth",fontSize:"sm",international:!0,defaultCountry:"DE",style:{width:"100%"},onChange:o=>{if(typeof o=="string"){const s=ee(o);s&&c(t=>({...t,country_code:s.countryCallingCode,phone:s.nationalNumber}))}},placeholder:"Phone",value:n.phone?`+${n.country_code} ${n.phone}`:"",inputComponent:S,inputProps:{_focus:{borderColor:"#ee7213",boxShadow:"0 0 0 1px #ee7213"}}})})]}),E("Member ID","memberId","text","GvI0uopUiTV1"),e.jsx(f,{type:"submit",fontSize:"sm",colorScheme:"green",fontWeight:"500",w:"100%",h:"50",mt:"20px",mb:"24px",isLoading:I,children:"Sign In"}),e.jsx(f,{fontSize:"sm",colorScheme:"blue",fontWeight:"500",w:"100%",h:"50",mb:"24px",onClick:()=>{c({...n,phone:"1234567892",country_code:"91",memberId:"DxB3SYiOIW"})},children:"Test Application"})]});return e.jsxs(oe,{illustrationBackground:P,image:P,children:[e.jsx(Z,{}),e.jsxs(h,{maxW:{base:"100%",md:"max-content"},w:"100%",mx:{base:"auto",lg:"0px"},me:"auto",h:"100%",alignItems:"start",justifyContent:"center",mb:{base:"30px",md:"60px"},px:{base:"25px",md:"0px"},mt:{base:"40px",md:"14vh"},flexDirection:"column",children:[e.jsxs(W,{me:"auto",mb:"24px",children:[e.jsx(G,{color:m,fontSize:"36px",mb:"20px",children:"Sign In"}),e.jsxs(H,{position:"relative",variant:"unstyled",mt:"10px",onChange:o=>F(o===0?"admin":"employee"),children:[e.jsxs(V,{children:[e.jsx(D,{_selected:{boxShadow:"none"},children:"Admin"}),e.jsx(D,{_selected:{boxShadow:"none"},children:"Employee"})]}),e.jsx(J,{mt:"-1.5px",height:"2px",bg:C==="admin"?"blue.500":"green.500",borderRadius:"1px"})]})]}),e.jsx(h,{zIndex:"2",direction:"column",w:{base:"100%",md:"420px"},maxW:"100%",background:"transparent",borderRadius:"15px",mx:{base:"auto",lg:"unset"},me:"auto",mb:{base:"20px",md:"auto"},children:C==="admin"?$():M()})]})]})}export{ge as default};
