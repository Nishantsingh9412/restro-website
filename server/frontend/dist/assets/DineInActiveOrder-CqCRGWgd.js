import{j as e,B as d,F as t,p as I,b as r,o as x,P as n,H as R,a4 as S,a5 as q}from"./chakra-B_DUJliM.js";import{G as C}from"./index.esm-C8Ls1WbU.js";import{h as N}from"./index.esm-CEhDG2xH.js";import{a_ as A,aI as c}from"./index-C674oLPn.js";import{d as y}from"./dineInOrder-Qshl_rwx.js";import{u as T}from"./redux-BFEnBRFN.js";import{A as E}from"./AllotOrderModal-ut9QwBD-.js";import{r as D}from"./react-D9OIIVWL.js";function _({data:s,handleAccept:f,handleReject:m,disabled:h}){var p;return e.jsx(d,{borderRadius:10,bg:"gray.100",p:5,flex:1,children:e.jsxs(t,{flexDirection:"column",gap:5,children:[e.jsxs(t,{gap:10,alignItems:"center",children:[e.jsx(d,{width:"60px",height:"60px",borderRadius:"50%",overflow:"hidden",children:e.jsx(I,{src:s.customerImage??"https://res.cloudinary.com/dezifvepx/image/upload/v1712570097/restro-website/dtqy5kkrwuuhamtp9gim.png",alt:s.customerName})}),e.jsx(r,{fontSize:18,children:s.customerName===""?"N/A":s.customerName})]}),e.jsxs(t,{flexDirection:"column",gap:3,children:[e.jsxs(r,{children:["Order #",s.orderId]}),e.jsx(r,{bg:"gray.200",w:"fit-content",px:2,py:1,fontSize:12,borderRadius:10,children:(p=s.currentStatus)==null?void 0:p.toUpperCase()}),e.jsxs(t,{gap:3,children:[e.jsxs(t,{alignItems:"center",border:"1px solid #ccc",p:2,borderRadius:5,flex:1,children:[e.jsx(C,{}),e.jsxs(r,{ml:3,children:[s.tableNumber," No. Table"]})]}),e.jsxs(t,{alignItems:"center",border:"1px solid #ccc",p:2,borderRadius:5,flex:1,children:[e.jsx(N,{}),e.jsxs(r,{ml:3,children:[s.numberOfGuests," Guest."]})]})]}),e.jsxs(d,{children:[e.jsx(r,{fontWeight:"bold",children:"Special Instructions:"}),e.jsx(r,{pl:3,children:s.specialInstructions||"None"})]}),e.jsxs(t,{gap:3,children:[e.jsx(x,{p:3,flex:1,bg:"green.500",_hover:{background:"green"},color:"#fff",_disabled:{background:"#ccc",pointerEvents:"none"},disabled:h,onClick:()=>f(s==null?void 0:s.orderId,A.DINE_IN),children:"Accept"}),e.jsx(x,{p:3,flex:1,bg:"red.500",_hover:{background:"red"},color:"#fff",_disabled:{background:"#ccc",pointerEvents:"none"},disabled:h,onClick:()=>m(s==null?void 0:s.orderId),children:"Reject"})]})]})]})})}_.propTypes={data:n.shape({customerImage:n.string,customerName:n.string.isRequired,orderId:n.number.isRequired,currentStatus:n.string,tableNumber:n.number.isRequired,numberOfGuests:n.number.isRequired,_id:n.string.isRequired,specialInstructions:n.string}).isRequired,handleAccept:n.func.isRequired,handleReject:n.func.isRequired,disabled:n.bool.isRequired};const G=({activeOrder:s,handleCancel:f,handleUpdateStatus:m})=>{var g;const h=T(),[p,a]=D.useState(!1),l=s==null?void 0:s.orderId,b=o=>{h(y({orderId:l,chef:o})).then(()=>{m(l,c.ASSIGNED_TO_CHEF)}).catch(i=>{console.error("Failed to allot order to chef:",i)})},j=()=>{const o=["Assigned","Accepted","Assigned To Chef","Accepted By Chef","Preparing","Completed"],i=o.indexOf(s==null?void 0:s.currentStatus);if(i<o.length-1){const u=o[i+1];if(u===c.ASSIGNED_TO_CHEF){a(!0),console.log("Allot to chef");return}m(l,u)}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{isOpen:p,setIsOpen:a,onSubmit:b,personnelType:"Chef"}),e.jsxs(d,{p:5,shadow:"md",borderWidth:"1px",borderRadius:"md",mt:4,children:[e.jsx(R,{fontSize:"xl",children:"Active Order"}),e.jsxs(r,{mt:4,children:[e.jsx("strong",{children:"Order ID:"})," ",l]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Table Number:"})," ",(s==null?void 0:s.tableNumber)||"N/A"]}),e.jsxs(r,{children:[e.jsx("strong",{children:"No Of Guest:"})," ",(s==null?void 0:s.numberOfGuests)||"N/A"]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Status:"})," ",s==null?void 0:s.currentStatus]}),e.jsx(r,{mt:4,children:e.jsx("strong",{children:"Order Items:"})}),e.jsx(S,{mt:1,ml:2,children:(g=s.orderItems)==null?void 0:g.map((o,i)=>{var u;return e.jsxs(q,{children:[(u=o.item)==null?void 0:u.orderName," - ",o.quantity]},i)})}),e.jsxs(d,{mt:4,display:"flex",justifyContent:"center",gap:5,children:[e.jsx(x,{colorScheme:"teal",onClick:j,isDisabled:(s==null?void 0:s.currentStatus)===c.COMPLETED||(s==null?void 0:s.currentStatus)===c.ASSIGNED_TO_CHEF,children:(s==null?void 0:s.currentStatus)===c.COMPLETED?"Order Completed":"Update Status"}),e.jsx(x,{colorScheme:"red",onClick:()=>f(l),children:"Cancel Order"})]})]})]})};G.propTypes={activeOrder:n.shape({orderId:n.number.isRequired,tableNumber:n.number.isRequired,numberOfGuests:n.number.isRequired,currentStatus:n.string.isRequired,orderItems:n.arrayOf(n.shape({name:n.string.isRequired,quantity:n.number.isRequired})).isRequired}).isRequired,handleCancel:n.func.isRequired,handleUpdateStatus:n.func.isRequired};export{G as D,_ as O};
