import{j as e,C as b,B as o,S as R,aa as C,ab as S,H as g,au as A,av as w,aw as E,ax as i,ay as n,az as T,aA as a,aB as F,b as c}from"./chakra-B_DUJliM.js";import{r as d}from"./react-D9OIIVWL.js";import{u as G}from"./redux-BFEnBRFN.js";import{ao as H,ap as U,aq as Y,ar as O}from"./index-C674oLPn.js";import"./toast-D556Fe1H.js";const y=async(s,l,h,u)=>{try{const{data:t}=await s();if(!t)throw new Error("No data received from API");return l({type:h,data:t.result||t}),{success:!0,message:u,data:t.result||t}}catch(t){return{success:!1,message:t.response.data.error||"An error occurred",status:t.response.status}}},v=s=>async l=>s?y(()=>H(s),l,"GET_ABSENT_ONLY","Absent data retrieved successfully"):{success:!1,message:"Employee ID is required"},P=()=>async s=>y(U,s,"GET_SHIFT_ONLY","Shift data retrieved successfully"),k=()=>async s=>y(Y,s,"GET_BIRTHDAY_ONLY","Birthday data retrieved successfully"),q=()=>async s=>y(O,s,"GET_BIRTHDAY_ONLY","Upcoming birthday data retrieved successfully");function J(){const[s,l]=d.useState([]),[h,u]=d.useState([]),[t,B]=d.useState([]),[f,D]=d.useState([]),[p,z]=d.useState(!0),x=G();d.useEffect(()=>{_(),L(),N(),I()},[]);const I=async()=>{try{const r=JSON.parse(localStorage.getItem("ProfileData"));if(!r||!r.result||!r.result._id)throw new Error("User data is not available");const m=r.result._id,j=await x(v(m));j.success?u(j.data):console.error("Failed to fetch absences",j.message)}catch(r){console.error("Error fetching absences",r)}},N=async()=>{try{const r=await x(P());r.success?l(r.data):console.error("Failed to fetch employee shifts",r.message)}catch(r){console.error("Error fetching employee shifts",r)}},_=async()=>{try{const r=await x(k());r.success?B(r.data):console.error("Failed to fetch birthdays",r.message)}catch(r){console.error("Error fetching birthdays",r)}finally{z(!1)}},L=async()=>{try{const r=await x(q());r.success?D(r.data):console.error("Failed to fetch upcoming birthdays",r.message)}catch(r){console.error("Error fetching upcoming birthdays",r)}};return p?e.jsx(b,{children:e.jsx(o,{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",children:e.jsx(R,{size:"xl"})})}):e.jsx(b,{children:e.jsxs(C,{gap:6,mt:12,templateColumns:"repeat(12, 1fr)",children:[e.jsxs(S,{colSpan:9,children:[e.jsx(o,{p:6,boxShadow:"md",bg:"white",borderRadius:"md",children:e.jsx(g,{fontSize:"lg",color:"gray.700",children:"Working"})}),e.jsx(o,{boxShadow:"md",bg:"white",mt:2,borderRadius:"md",p:4,children:e.jsx(A,{children:e.jsxs(w,{variant:"simple",children:[e.jsx(E,{bg:"gray.50",children:e.jsxs(i,{children:[e.jsx(n,{children:"Employee"}),e.jsx(n,{children:"From"}),e.jsx(n,{children:"To"}),e.jsx(n,{children:"Duration"})]})}),e.jsx(T,{children:s&&s.length>0?s.map(r=>e.jsxs(i,{children:[e.jsx(a,{children:r.employeeId?r.employeeId.name:"N/A"}),e.jsx(a,{children:new Date(r.from).toLocaleDateString()}),e.jsx(a,{children:new Date(r.to).toLocaleDateString()}),e.jsxs(a,{children:[r.duration," Hours"]})]},r._id)):e.jsx(i,{children:e.jsx(a,{colSpan:4,textAlign:"center",children:"No Data Available"})})})]})})}),e.jsx(o,{mt:6,p:6,boxShadow:"md",bg:"white",borderRadius:"md",children:e.jsx(g,{fontSize:"lg",color:"gray.700",children:"Absent"})}),e.jsx(o,{boxShadow:"md",bg:"white",mt:2,borderRadius:"md",p:4,children:e.jsx(A,{children:e.jsxs(w,{variant:"simple",children:[e.jsx(E,{bg:"gray.50",children:e.jsxs(i,{children:[e.jsx(n,{children:"Employee"}),e.jsx(n,{children:"Absence"}),e.jsx(n,{children:"Note"})]})}),e.jsx(T,{children:h&&h.length>0?h.map(r=>e.jsxs(i,{children:[e.jsx(a,{children:r.employeeId?r.employeeId.name:"N/A"}),e.jsx(a,{children:r.leaveType}),e.jsx(a,{children:r.notes})]},r._id)):e.jsx(i,{children:e.jsx(a,{colSpan:3,textAlign:"center",children:"No Absences Recorded"})})})]})})})]}),e.jsx(S,{colSpan:3,children:e.jsx(o,{children:e.jsxs(F,{boxShadow:"md",bg:"white",p:8,borderRadius:"md",children:[e.jsx(g,{fontSize:"xl",color:"rgb(63, 73, 98)",children:"Birthdays"}),e.jsx(g,{fontSize:"lg",mt:6,color:"gray.600",children:"Today"}),p?e.jsx(c,{fontSize:"sm",color:"gray.500",children:"Loading..."}):t.length>0?e.jsx("ul",{children:t.map((r,m)=>e.jsx(c,{fontSize:"sm",color:"gray.700",children:r.name},m))}):e.jsx(c,{fontSize:"sm",color:"gray.500",children:"There is no birthday today."}),e.jsx(g,{fontSize:"lg",mt:6,color:"gray.600",children:"Upcoming Birthdays"}),p?e.jsx(c,{fontSize:"sm",color:"gray.500",children:"Loading..."}):f.length>0?e.jsx("ul",{children:f.map((r,m)=>e.jsx(c,{fontSize:"sm",color:"gray.700",children:r.name},m))}):e.jsx(c,{fontSize:"sm",color:"gray.500",children:"There are no upcoming birthdays."})]})})})]})})}function X(){return e.jsx(J,{})}export{X as default};
