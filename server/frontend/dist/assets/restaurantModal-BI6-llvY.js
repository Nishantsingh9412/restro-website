import{j as r,r as L,s as b,t as M,v as q,y as A,w as F,a1 as d,a2 as l,q as c,o as u,x as S,P as p}from"./chakra-B_DUJliM.js";import{r as h}from"./react-D9OIIVWL.js";import{r as w,aa as E}from"./index-C674oLPn.js";const T=({isOpen:g,onClose:n})=>{const x={name:"",address:"",phone:"",coordinates:{lat:"",lng:""}},s=w(),[o,t]=h.useState(x),[m,i]=h.useState(!1),j=a=>{const{id:e,value:R}=a.target;t(y=>({...y,[e]:R}))},C=()=>{i(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{t(e=>({...e,coordinates:{lat:a.coords.latitude,lng:a.coords.longitude}})),i(!1)},a=>{console.error("Error obtaining location",a)},{enableHighAccuracy:!0}):(alert("Geolocation is not supported by this browser."),i(!1))},f=a=>{for(const e in a)if(!a[e])return(e==null?void 0:e.charAt(0).toUpperCase())+e.slice(1)},v=async()=>{const a=f(o);if(a){s(`${a} is required`,"error");return}try{const{data:e}=await E(o);e.success?(s("Restaurant details added successfully","success"),n()):e.error?s(e.error.message,"error"):s("An unexpected error occurred","error")}catch(e){e.response&&e.response.data&&e.response.data.error?s("Failed to add restaurant details: "+e.response.data.error,"error"):s("Failed to add restaurant details: "+e.message,"error")}};return h.useEffect(()=>()=>{t(x)},[g]),r.jsxs(L,{isOpen:g,onClose:n,children:[r.jsx(b,{}),r.jsxs(M,{children:[r.jsx(q,{children:"Add Restaurant"}),r.jsx(A,{}),r.jsxs(F,{children:[["name","address","phone"].map(a=>r.jsxs(d,{id:a,isRequired:!0,mt:4,children:[r.jsx(l,{children:a.charAt(0).toUpperCase()+a.slice(1)}),r.jsx(c,{value:o[a],onChange:j})]},a)),r.jsxs(d,{id:"lat",isRequired:!0,mt:4,children:[r.jsx(l,{children:"Latitude"}),r.jsx(c,{value:o.coordinates.lat,onChange:a=>t(e=>({...e,coordinates:{...e.coordinates,lat:a.target.value}}))})]}),r.jsxs(d,{id:"lng",isRequired:!0,mt:4,children:[r.jsx(l,{children:"Longitude"}),r.jsx(c,{value:o.coordinates.lng,onChange:a=>t(e=>({...e,coordinates:{...e.coordinates,lng:a.target.value}}))})]}),r.jsx(u,{mt:4,onClick:C,children:m?"Locating...":"Auto Locate"})]}),r.jsxs(S,{children:[r.jsx(u,{colorScheme:"blue",mr:3,onClick:v,children:"Save"}),r.jsx(u,{variant:"ghost",onClick:n,children:"Cancel"})]})]})]})};T.propTypes={isOpen:p.bool.isRequired,onClose:p.func.isRequired};export{T as R};
